import{a as z,r as l,j as e,g as E,o as J,t as c,c as K,H as X,P as Q}from"./index-BCuZxbD8.js";import{C as g,a as D,b as C,d as S,c as v,B as w}from"./card-BZCwF2ha.js";import{I as k}from"./input-DC0RY2cr.js";import{L as p}from"./label-DwkYLm-_.js";import{T as W}from"./textarea-DgQAEXfd.js";import{S as Z,a as ee,b as se,c as te,d as y}from"./select-NjGyr1yZ.js";import{u as ae,L as ie,P as re}from"./useFile-CSY-wI_b.js";import{P as N}from"./pen-line-C0FXlT8m.js";import{U as le,D as ne}from"./upload-CEDi3A5_.js";import{F as L}from"./file-text-BAFsm70A.js";import{C as R}from"./circle-check-big-C4ZXUORf.js";import{I as de}from"./image-ClLUQUCC.js";import{A as ce}from"./arrow-left-BX2ahb_h.js";import"./index-4bWk3Ex3.js";import"./index-DktlMZy8.js";import"./useIndedxDB-CUkMxrAP.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oe=z("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xe=z("Type",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]),me=J("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),M=l.forwardRef(({className:i,variant:n,...d},h)=>e.jsx("div",{ref:h,role:"alert",className:E(me({variant:n}),i),...d}));M.displayName="Alert";const pe=l.forwardRef(({className:i,...n},d)=>e.jsx("h5",{ref:d,className:E("mb-1 font-medium leading-none tracking-tight",i),...n}));pe.displayName="AlertTitle";const _=l.forwardRef(({className:i,...n},d)=>e.jsx("div",{ref:d,className:E("text-sm [&_p]:leading-relaxed",i),...n}));_.displayName="AlertDescription";const he=()=>{const[i,n]=l.useState(null),[d,h]=l.useState(!1),[T,A]=l.useState(0),[o,u]=l.useState(null),[a,I]=l.useState(""),[j,B]=l.useState(""),[r,F]=l.useState({x:100,y:100}),f=l.useRef(null),[m,O]=l.useState(null),U=ae(),H=s=>{var x;const t=(x=s.target.files)==null?void 0:x[0];if(t&&t.type==="application/pdf"){if(t.size>50*1024*1024){c({title:"File too large",description:"Please select a PDF file smaller than 50MB",variant:"destructive"});return}n(t),u(null)}else c({title:"Invalid file type",description:"Please select a PDF file",variant:"destructive"})},V=s=>{s.preventDefault();const t=s.dataTransfer.files[0];if(t&&t.type==="application/pdf"){if(t.size>50*1024*1024){c({title:"File too large",description:"Please select a PDF file smaller than 50MB",variant:"destructive"});return}n(t),u(null)}},Y=s=>{s.preventDefault()},$=async()=>{if(!i||!a){c({title:"Missing information",description:"Please select a file and edit type",variant:"destructive"});return}try{const s=new FormData;if(s.append("file",i),s.append("editType",a),a==="add-image"){if(!m){c({title:"No image selected",description:"Please select an image to add",variant:"destructive"}),h(!1);return}s.append("imageFile",m)}let t={};a==="add-text"?t={content:j,x:r.x,y:r.y}:a==="add-signature"?t={content:j,x:r.x,y:r.y}:a==="add-annotation"?t={content:j,x:r.x,y:r.y}:t={x:r.x,y:r.y},s.append("editData",JSON.stringify(t)),await U({original_file:i,formData:s,setResult:u,setProgress:A,conversion_type:"edit"}),c({title:"PDF edited successfully!",description:"Your edited PDF is ready for download"})}catch(s){console.error("Edit error:",s),c({title:"Edit failed",description:s instanceof Error?s.message:"An error occurred while editing the PDF",variant:"destructive"})}finally{h(!1),A(0)}},q=async()=>{if(!o||!o.blob)return;c({title:"Preparing download...",description:"Please wait while your PDF is being processed."});const s=URL.createObjectURL(o.blob),t=document.createElement("a");t.href=s,t.download=o.converted_filename,document.body.appendChild(t),t.click(),document.body.removeChild(t)},b=s=>{const t=["B","KB","MB","GB"];let x=s,P=0;for(;x>=1024&&P<t.length-1;)x/=1024,P++;return`${x.toFixed(1)} ${t[P]}`},G=()=>{n(null),u(null),I(""),B(""),F({x:100,y:100}),f.current&&(f.current.value="")};return e.jsxs("div",{className:"max-w-4xl mx-auto space-y-8",children:[e.jsxs("div",{className:"text-center space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-center space-x-3",children:[e.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-gradient-primary rounded-xl shadow-soft",children:e.jsx(N,{className:"h-6 w-6 text-primary-foreground"})}),e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Edit PDF"})]}),e.jsx("p",{className:"text-lg text-muted-foreground max-w-2xl mx-auto",children:"Add text, annotations, signatures, and other elements to your PDF documents"})]}),e.jsxs("div",{className:"grid gap-8 lg:grid-cols-2",children:[e.jsxs(g,{className:"shadow-medium",children:[e.jsxs(D,{children:[e.jsxs(C,{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"h-5 w-5"}),e.jsx("span",{children:"Upload PDF"})]}),e.jsx(S,{children:"Select a PDF file to edit (max 50MB)"})]}),e.jsxs(v,{className:"space-y-4",children:[e.jsxs("div",{className:"border-2 border-dashed border-border rounded-lg p-8 text-center hover:border-primary/50 transition-colors cursor-pointer",onDrop:V,onDragOver:Y,onClick:()=>{var s;return(s=f.current)==null?void 0:s.click()},children:[e.jsx(L,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-medium",children:i?i.name:"Click to upload or drag and drop"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"PDF files only, up to 50MB"})]})]}),e.jsx("input",{ref:f,type:"file",accept:".pdf",onChange:H,className:"hidden"}),i&&e.jsxs(M,{children:[e.jsx(R,{className:"h-4 w-4"}),e.jsxs(_,{children:["Selected: ",i.name," (",b(i.size),")"]})]})]})]}),e.jsxs(g,{className:"shadow-medium",children:[e.jsxs(D,{children:[e.jsxs(C,{className:"flex items-center space-x-2",children:[e.jsx(N,{className:"h-5 w-5"}),e.jsx("span",{children:"Edit Options"})]}),e.jsx(S,{children:"Choose what you want to add to your PDF"})]}),e.jsxs(v,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"edit-type",children:"Edit Type"}),e.jsxs(Z,{value:a,onValueChange:I,children:[e.jsx(ee,{children:e.jsx(se,{placeholder:"Select edit type"})}),e.jsxs(te,{children:[e.jsx(y,{value:"add-text",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xe,{className:"h-4 w-4"}),e.jsx("span",{children:"Add Text"})]})}),e.jsx(y,{value:"add-signature",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(N,{className:"h-4 w-4"}),e.jsx("span",{children:"Add Signature"})]})}),e.jsx(y,{value:"add-annotation",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(oe,{className:"h-4 w-4"}),e.jsx("span",{children:"Add Annotation"})]})}),e.jsx(y,{value:"add-image",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(de,{className:"h-4 w-4"}),e.jsx("span",{children:"Add Image"})]})})]})]})]}),a&&["add-text","add-signature","add-annotation"].includes(a)&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"text-content",children:a==="add-text"?"Text Content":a==="add-signature"?"Signature Text":"Annotation"}),e.jsx(W,{id:"text-content",placeholder:`Enter ${a==="add-text"?"text":a==="add-signature"?"signature":"annotation"} content...`,value:j,onChange:s=>B(s.target.value),rows:3})]}),a==="add-image"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"image-upload",children:"Select Image"}),e.jsx(k,{id:"image-upload",type:"file",accept:"image/*",onChange:s=>{var t;return O(((t=s.target.files)==null?void 0:t[0])||null)}}),m&&e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Selected: ",m.name," (",b(m.size),")"]})]}),a&&e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"position-x",children:"X Position"}),e.jsx(k,{id:"position-x",type:"number",value:r.x,onChange:s=>F({...r,x:parseInt(s.target.value)||0}),placeholder:"100"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"position-y",children:"Y Position"}),e.jsx(k,{id:"position-y",type:"number",value:r.y,onChange:s=>F({...r,y:parseInt(s.target.value)||0}),placeholder:"100"})]})]}),e.jsx(w,{onClick:$,disabled:!i||!a||d,className:"w-full",children:d?e.jsxs(e.Fragment,{children:[e.jsx(ie,{className:"mr-2 h-4 w-4 animate-spin"}),"Editing PDF..."]}):e.jsxs(e.Fragment,{children:[e.jsx(N,{className:"mr-2 h-4 w-4"}),"Edit PDF"]})})]})]})]}),d&&e.jsx(g,{className:"shadow-medium",children:e.jsx(v,{className:"pt-6",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Editing PDF..."}),e.jsxs("span",{children:[T,"%"]})]}),e.jsx(re,{value:T,className:"w-full"})]})})}),o&&e.jsxs(g,{className:"shadow-medium",children:[e.jsxs(D,{children:[e.jsxs(C,{className:"flex items-center space-x-2",children:[e.jsx(R,{className:"h-5 w-5 text-success"}),e.jsx("span",{children:"PDF Edited Successfully!"})]}),e.jsx(S,{children:"Your PDF has been edited and is ready for download"})]}),e.jsxs(v,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-secondary rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(L,{className:"h-8 w-8 text-primary"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:o.converted_filename}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[b(o.file_size)," â€¢ ",a]})]})]}),e.jsxs(w,{onClick:q,children:[e.jsx(ne,{className:"mr-2 h-4 w-4"}),"Download"]})]}),e.jsx("div",{className:"flex space-x-2",children:e.jsx(w,{onClick:G,variant:"outline",className:"flex-1",children:"Edit Another PDF"})})]})]})]})},ue=()=>e.jsx(e.Fragment,{children:e.jsxs("div",{className:"min-h-screen bg-gradient-subtle",children:[e.jsx("div",{className:"border-b border-border bg-background/95 backdrop-blur",children:e.jsx("div",{className:"container px-4 py-4",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(w,{variant:"ghost",size:"sm",asChild:!0,children:e.jsxs("a",{href:"../",children:[e.jsx(ce,{className:"h-4 w-4"}),"Back to Home"]})}),e.jsx("div",{className:"h-4 w-px bg-border"}),e.jsx("h1",{className:"font-semibold text-lg",children:"Edit PDF"})]})})}),e.jsx("div",{className:"container px-4 py-8",children:e.jsx(he,{})})]})});K(document.getElementById("root")).render(e.jsx(X,{children:e.jsx(Q,{page:"edit",children:e.jsx(ue,{})})}));
