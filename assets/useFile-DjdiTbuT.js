import{a as $,b as S,r as x,j as c,d as P,g as E}from"./index-8DrkAZ6i.js";import{u as C}from"./useIndedxDB-Bgy_AGlL.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k=$("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);var p="Progress",v=100,[D,G]=S(p),[L,z]=D(p),h=x.forwardRef((e,r)=>{const{__scopeProgress:o,value:n=null,max:a,getValueLabel:l=M,...d}=e;(a||a===0)&&!m(a)&&console.error(R(`${a}`,"Progress"));const s=m(a)?a:v;n!==null&&!g(n,s)&&console.error(V(`${n}`,"Progress"));const t=g(n,s)?n:null,i=u(t)?l(t,s):void 0;return c.jsx(L,{scope:o,value:t,max:s,children:c.jsx(P.div,{"aria-valuemax":s,"aria-valuemin":0,"aria-valuenow":u(t)?t:void 0,"aria-valuetext":i,role:"progressbar","data-state":y(t,s),"data-value":t??void 0,"data-max":s,...d,ref:r})})});h.displayName=p;var w="ProgressIndicator",j=x.forwardRef((e,r)=>{const{__scopeProgress:o,...n}=e,a=z(w,o);return c.jsx(P.div,{"data-state":y(a.value,a.max),"data-value":a.value??void 0,"data-max":a.max,...n,ref:r})});j.displayName=w;function M(e,r){return`${Math.round(e/r*100)}%`}function y(e,r){return e==null?"indeterminate":e===r?"complete":"loading"}function u(e){return typeof e=="number"}function m(e){return u(e)&&!isNaN(e)&&e>0}function g(e,r){return u(e)&&!isNaN(e)&&e<=r&&e>=0}function R(e,r){return`Invalid prop \`max\` of value \`${e}\` supplied to \`${r}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${v}\`.`}function V(e,r){return`Invalid prop \`value\` of value \`${e}\` supplied to \`${r}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${v} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var N=h,A=j;const O=x.forwardRef(({className:e,value:r,...o},n)=>c.jsx(N,{ref:n,className:E("relative h-4 w-full overflow-hidden rounded-full bg-secondary",e),...o,children:c.jsx(A,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(r||0)}%)`}})}));O.displayName=N.displayName;function F(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const r=crypto.getRandomValues(new Uint8Array(1))[0]&15;return(e==="x"?r:r&3|8).toString(16)})}const b={"compress-pdf":{objective:"Compression",extention:"_compressed.pdf"},edit:{objective:"edit",extention:"_edited.pdf"},"merge-pdf":{objective:"merge",extention:"_merged.pdf"},"pdf-to-jpg":{objective:"conversion",extention:"_jpg.zip"},"pdf-to-word":{objective:"conversion",extention:".docx"},"split-pdf":{objective:"split",extention:"_split.zip"}};function X(){const{saveFile:e}=C();return async({original_file:o,formData:n,setResult:a,setProgress:l,conversion_type:d})=>{const s=new Date().toISOString();let t={id:F(),original_filename:o.name,converted_filename:null,conversion_type:d,status:"uploading",created_at:s,completed_at:null,file_size:o.size,blob:o};l(10),a(t);try{const i=await fetch(`https://convertingpdf-server.onrender.com/${d}`,{method:"POST",body:n});if(!i.ok){const _=await i.json();throw new Error(_.error||`${b[d].objective} failed`)}l(30),t.status="processing",a({...t});const f=await i.blob(),I=new Date().toISOString();return t={...t,converted_filename:o.name.replace(".pdf",b[d].extention),blob:f,status:"completed",completed_at:I,file_size:f.size},a(t),l(100),await e(t),t}catch(i){throw t.status="error",a({...t}),l(0),i}}}export{k as L,O as P,X as u};
