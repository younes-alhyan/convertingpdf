import{r as i,t as n,j as e,X as S,c as B,P as I}from"./index-8DrkAZ6i.js";import{C as m,a as h,b as p,d as u,c as j,B as d}from"./card-Ds7FwNil.js";import{I as U}from"./input-rC0pfKxX.js";import{B as z}from"./badge-DiAH8OnL.js";import{u as E,L,P as R}from"./useFile-DjdiTbuT.js";import{C as N}from"./combine-DbE3f4T1.js";import{U as y,D as _}from"./upload-CD0UYK1H.js";import{F as b}from"./file-text-DxiVD_fH.js";import{C as A}from"./circle-check-big-BIHbnpL-.js";import{C as O}from"./circle-alert-m03Axkez.js";import{A as H}from"./arrow-left-DnwOAZsb.js";import"./useIndedxDB-Bgy_AGlL.js";const T=()=>{const[l,x]=i.useState([]),[o,v]=i.useState(!1),[f,g]=i.useState(0),[t,F]=i.useState(null),w=E(),P=i.useCallback(s=>{const r=Array.from(s.target.files||[]),a=r.filter(c=>c.type==="application/pdf");a.length!==r.length&&n({title:"Invalid Files",description:"Only PDF files are allowed",variant:"destructive"});const M=a.map(c=>({file:c,id:crypto.randomUUID()}));x(c=>[...c,...M]),s.target.value=""},[]),C=i.useCallback(s=>{x(r=>r.filter(a=>a.id!==s))},[]),D=async()=>{if(l.length<2){n({title:"More Files Needed",description:"Select at least 2 PDF files to merge",variant:"destructive"});return}try{const s=new FormData;l.forEach(({file:a})=>{s.append("files",a)});const r={original_file:l[0].file,formData:s,setResult:F,setProgress:g,conversion_type:"merge-pdf"};await w(r),n({title:"Success!",description:"PDFs have been merged successfully"}),x([])}catch(s){console.error("Merge error:",s),n({title:"Merge Failed",description:s.message||"Failed to merge PDFs. Please try again.",variant:"destructive"})}finally{v(!1),g(0)}},k=async()=>{if(!t||!t.blob)return;n({title:"Preparing download...",description:"Please wait while your PDF is being processed."});const s=URL.createObjectURL(t.blob),r=document.createElement("a");r.href=s,r.download=t.converted_filename,document.body.appendChild(r),r.click(),document.body.removeChild(r)};return e.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[e.jsx(m,{children:e.jsxs(h,{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-primary/10 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(N,{className:"h-8 w-8 text-primary"})}),e.jsx(p,{className:"text-2xl",children:"Merge PDF Files"}),e.jsx(u,{children:"Combine multiple PDF files into a single document. Upload your files and merge them in seconds."})]})}),e.jsxs(m,{children:[e.jsxs(h,{children:[e.jsx(p,{className:"text-lg",children:"Select PDF Files"}),e.jsx(u,{children:"Choose 2 or more PDF files to merge. Files will be combined in the order they are added."})]}),e.jsxs(j,{className:"space-y-4",children:[e.jsx("div",{className:"border-2 border-dashed border-border rounded-lg p-8 text-center hover:border-primary/50 transition-colors",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx(y,{className:"h-12 w-12 text-muted-foreground mx-auto"}),e.jsx("div",{children:e.jsxs("label",{htmlFor:"pdf-upload",className:"cursor-pointer",children:[e.jsx("span",{className:"text-lg font-medium text-foreground",children:"Drop PDF files here or click to browse"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Only PDF files are supported"}),e.jsx(U,{id:"pdf-upload",type:"file",accept:".pdf,application/pdf",multiple:!0,onChange:P,className:"hidden"})]})}),e.jsxs(d,{variant:"outline",onClick:()=>{var s;return(s=document.getElementById("pdf-upload"))==null?void 0:s.click()},children:[e.jsx(y,{className:"h-4 w-4 mr-2"}),"Select Files"]})]})}),l.length>0&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h4",{className:"font-medium",children:["Selected Files (",l.length,")"]}),e.jsx(z,{variant:"secondary",children:l.length>=2?"Ready to merge":"Need more files"})]}),e.jsx("div",{className:"space-y-2",children:l.map(({file:s,id:r},a)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-secondary/50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-primary/10 rounded flex items-center justify-center text-sm font-medium",children:a+1}),e.jsx(b,{className:"h-5 w-5 text-primary"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm",children:s.name}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[(s.size/(1024*1024)).toFixed(1)," MB"]})]})]}),e.jsx(d,{variant:"ghost",size:"sm",onClick:()=>C(r),disabled:o,children:e.jsx(S,{className:"h-4 w-4"})})]},r))})]}),e.jsx("div",{className:"pt-4",children:e.jsx(d,{onClick:D,disabled:l.length<2||o,className:"w-full",size:"lg",children:o?e.jsxs(e.Fragment,{children:[e.jsx(L,{className:"h-4 w-4 mr-2 animate-spin"}),"Merging PDFs..."]}):e.jsxs(e.Fragment,{children:[e.jsx(N,{className:"h-4 w-4 mr-2"}),"Merge ",l.length," PDFs"]})})}),o&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{children:"Processing..."}),e.jsxs("span",{children:[f,"%"]})]}),e.jsx(R,{value:f,className:"w-full"})]})]})]}),t&&e.jsxs(m,{children:[e.jsxs(h,{children:[e.jsxs(p,{className:"flex items-center space-x-2",children:[e.jsx(A,{className:"h-5 w-5 text-success"}),e.jsx("span",{children:"Merge Completed"})]}),e.jsx(u,{children:"Your PDFs have been successfully merged into a single document."})]}),e.jsx(j,{className:"space-y-4",children:e.jsxs("div",{className:"flex items-center justify-between p-4 bg-success/10 rounded-lg border border-success/20",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(b,{className:"h-6 w-6 text-success"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:t.converted_filename}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[(t.file_size/(1024*1024)).toFixed(1)," MB"]})]})]}),e.jsxs(d,{onClick:k,children:[e.jsx(_,{className:"h-4 w-4 mr-2"}),"Download"]})]})})]}),e.jsx(m,{children:e.jsx(j,{className:"pt-6",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(O,{className:"h-5 w-5 text-primary mt-0.5"}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-medium",children:"Important Notes:"}),e.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1",children:[e.jsx("li",{children:"• Files are merged in the order they appear in the list"}),e.jsx("li",{children:"• Your files are processed securely and automatically deleted after download"}),e.jsx("li",{children:"• Maximum file size: 10MB per file for free accounts"}),e.jsx("li",{children:"• Supported format: PDF files only"})]})]})]})})})]})},Y=()=>e.jsxs("div",{className:"min-h-screen bg-gradient-subtle",children:[e.jsx("div",{className:"border-b border-border bg-background/95 backdrop-blur",children:e.jsx("div",{className:"container px-4 py-4",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(d,{variant:"ghost",size:"sm",asChild:!0,children:e.jsxs("a",{href:"../",children:[e.jsx(H,{className:"h-4 w-4 mr-2"}),"Back to Home"]})}),e.jsx("div",{className:"h-4 w-px bg-border"}),e.jsx("h1",{className:"font-semibold text-lg",children:"Merge PDF"})]})})}),e.jsx("div",{className:"container px-4 py-8",children:e.jsx(T,{})})]});B(document.getElementById("root")).render(e.jsx(I,{children:e.jsx(Y,{})}));
