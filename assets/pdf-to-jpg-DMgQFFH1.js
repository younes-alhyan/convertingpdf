import{r as l,t,j as e,X as L,c as R,P as U}from"./index-8DrkAZ6i.js";import{C as d,a as h,b as p,d as N,c as u,B as i}from"./card-Ds7FwNil.js";import{I as B}from"./input-rC0pfKxX.js";import{B as z}from"./badge-DiAH8OnL.js";import{u as A,L as E,P as O}from"./useFile-DjdiTbuT.js";import{J as T}from"./jszip.min-Cimci-sI.js";import{I as _}from"./image-CiFL8-20.js";import{U as Z,D as w}from"./upload-CD0UYK1H.js";import{F as H}from"./file-text-DxiVD_fH.js";import{C as M}from"./circle-check-big-BIHbnpL-.js";import{C as $}from"./circle-alert-m03Axkez.js";import{A as q}from"./arrow-left-DnwOAZsb.js";import"./useIndedxDB-Bgy_AGlL.js";const X=()=>{const[a,j]=l.useState(null),[n,P]=l.useState(!1),[y,m]=l.useState(0),[x,C]=l.useState([]),[o,F]=l.useState(null),D=A(),k=l.useCallback(s=>{var c;const r=(c=s.target.files)==null?void 0:c[0];r&&r.type==="application/pdf"?j(r):t({title:"Invalid File",description:"Please select a PDF file",variant:"destructive"}),s.target.value=""},[]),J=l.useCallback(()=>{j(null)},[]),S=async()=>{if(!a){t({title:"File Required",description:"Please select a PDF file",variant:"destructive"});return}try{const s=new FormData;s.append("file",a);const c=await D({original_file:a,formData:s,setResult:F,setProgress:m,conversion_type:"pdf-to-jpg"}),f=await T.loadAsync(c.blob),v=[];for(const b of Object.keys(f.files)){const g=await f.files[b].async("blob");v.push({filename:b,blob:g,url:URL.createObjectURL(g)})}C(v),m(100),t({title:"Success!",description:"PDF converted to JPG successfully"})}catch(s){console.error(s),t({title:"Conversion Failed",description:s.message,variant:"destructive"})}finally{P(!1),m(0)}},I=s=>{const r=document.createElement("a");r.href=s.url,r.download=s.filename,document.body.appendChild(r),r.click(),document.body.removeChild(r),t({title:"Downloaded",description:`${s.filename} downloaded`})},G=async()=>{if(o.blob){t({title:"Preparing download...",description:"Please wait while your PDF is being processed."});try{const s=URL.createObjectURL(o.blob),r=document.createElement("a");r.href=s,r.download=o.converted_filename,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(s),t({title:"Downloaded",description:`${o.converted_filename} downloaded`})}catch(s){t({title:"Download Failed",description:s.message,variant:"destructive"})}}};return e.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[e.jsx(d,{children:e.jsxs(h,{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-primary/10 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(_,{className:"h-8 w-8 text-primary"})}),e.jsx(p,{className:"text-2xl",children:"PDF to JPG Converter"}),e.jsx(N,{children:"Converts PDF pages to JPG using server-side processing"})]})}),e.jsxs(d,{children:[e.jsxs(h,{children:[e.jsx(p,{children:"Select PDF File"}),e.jsx(N,{children:"Choose a PDF file to convert"})]}),e.jsx(u,{className:"space-y-4",children:a?e.jsxs("div",{className:"flex items-center justify-between p-4 bg-secondary/50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(H,{className:"h-6 w-6 text-primary"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:a.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[(a.size/1024/1024).toFixed(1)," MB"]})]})]}),e.jsx(i,{variant:"ghost",size:"sm",onClick:J,disabled:n,children:e.jsx(L,{className:"h-4 w-4"})})]}):e.jsxs("div",{className:"border-2 border-dashed border-border rounded-lg p-8 text-center hover:border-primary/50 transition-colors",children:[e.jsx(Z,{className:"h-12 w-12 text-muted-foreground mx-auto"}),e.jsxs("label",{htmlFor:"pdf-upload",className:"cursor-pointer block mt-4",children:[e.jsx("span",{className:"text-lg font-medium text-foreground",children:"Click to select PDF"}),e.jsx(B,{id:"pdf-upload",type:"file",accept:".pdf",onChange:k,className:"hidden"})]})]})})]}),a&&e.jsx(i,{onClick:S,className:"w-full",disabled:n,children:n?e.jsxs(e.Fragment,{children:[e.jsx(E,{className:"h-4 w-4 mr-2 animate-spin"}),"Converting..."]}):e.jsx(e.Fragment,{children:"Convert to JPG"})}),n&&e.jsx(O,{value:y,className:"w-full mt-2"}),x.length>0&&e.jsxs(d,{children:[e.jsx(h,{children:e.jsxs(p,{className:"flex items-center space-x-2",children:[e.jsx(M,{className:"h-5 w-5 text-success"}),e.jsx("span",{children:"Conversion Completed"})]})}),e.jsxs(u,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(z,{variant:"secondary",children:[x.length," JPG(s) created"]}),e.jsxs(i,{onClick:G,variant:"outline",children:[e.jsx(w,{className:"h-4 w-4 mr-2"}),"Download All"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:x.map((s,r)=>e.jsxs("div",{className:"border rounded-lg p-4 space-y-2",children:[e.jsx("img",{src:s.url,alt:s.filename,className:"w-full object-contain h-48"}),e.jsx("p",{className:"text-sm truncate",children:s.filename}),e.jsxs(i,{size:"sm",className:"w-full",onClick:()=>I(s),children:[e.jsx(w,{className:"h-4 w-4 mr-2"}),"Download JPG"]})]},r))})]})]}),e.jsx(d,{children:e.jsx(u,{children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx($,{className:"h-5 w-5 text-primary mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Notes:"}),e.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1",children:[e.jsx("li",{children:"• Conversion is done on the server, returning a ZIP with JPGs"}),e.jsx("li",{children:"• You can download individual JPGs or the full ZIP"}),e.jsx("li",{children:"• Maximum PDF size depends on server limits"})]})]})]})})})]})},Y=()=>e.jsxs("div",{className:"min-h-screen bg-gradient-subtle",children:[e.jsx("div",{className:"border-b border-border bg-background/95 backdrop-blur",children:e.jsx("div",{className:"container px-4 py-4",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(i,{variant:"ghost",size:"sm",asChild:!0,children:e.jsxs("a",{href:"../",children:[e.jsx(q,{className:"h-4 w-4 mr-2"}),"Back to Home"]})}),e.jsx("div",{className:"h-4 w-px bg-border"}),e.jsx("h1",{className:"font-semibold text-lg",children:"PDF to JPG"})]})})}),e.jsx("div",{className:"container px-4 py-8",children:e.jsx(X,{})})]});R(document.getElementById("root")).render(e.jsx(U,{children:e.jsx(Y,{})}));
